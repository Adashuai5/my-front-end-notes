《代码大全》（第二版）

## 第五章 软件构建中的设计

1. 设计是一个险恶（wicked）的问题
   险恶的问题就是那些只有通过解决或部分解决才能被明确的问题。
   你必须首先把这个问题「解决」一遍才能明确的定义这个问题。
   书中有一个大桥被风吹垮的例子。

2. 软件的首要技术使命：管理复杂度

   如果一个项目因为技术而失败，通常的原因就是技术太复杂导致失控。

   将大系统分解成小系统，保持函数短小等。

   高代价、低效率的设计源于：

   ```
    1. 用复杂的方法解决简单的问题
    2. 用简单但错误的方法解决复杂的问题
    3. 用不恰当的复杂方法解决复杂的问题
   ```

## 第25章 代码调整策略

1. 一些无稽之谈
   - 代码行数越少，性能越高——错误
   - 特定运算可能比其他的快，性能更好——错误！没有什么「可能」，你应该测量
   - 开发者应该不断的优化代码——错误！一叶障目，没有大局观
   - 程序的运行速度同其正确性一样重要——错误！
2. 编译器的优化可能比你写得代码更好

## 第26章 代码调整技巧

### 逻辑

1. 在知道答案后停止判断

2. 按照出现频率来调整判断顺序

3. 要做性能测试，不要盲目相信结论

4. 用表代替复杂分支

   <img src="https://upload-images.jianshu.io/upload_images/7094266-b5444a7fb4b56e06.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" style="zoom:50%;" />

   ```javascript
   {
   	true: {
   		true: {
   			true: 3,
   			false: 1
   		},
   		false: {
   			true: 3
   			false: 1
   		}
   	},
   	false: {
   		true: {
   			true: 2,
   			false: 1
   		},
   		false: {
   			true: 2
   			false: null
   		}
   	}
   }
   
   table[A][B][C]
   ```

   

5. 惰性求值

虚拟列表：

几万列的表，全展示有性能问题，只展示用户看到部分，其他都用空值代替，包括向下和向上滚动。

### 循环

1. 将不需要重复计算的逻辑外提
2. 使用哨兵值加速循环

```javascript
const currentNumber = 6 // 哨兵
let array = [1,2,3,4,5,6,7,8,9,10]
let i = 0

array.push(currentNumber)
while(array[i] !== currentNumber) {
    i++
}
console.log(i)
```

1. 把最忙（循环次数多）的循环放在最内层

### 其他

1. 削弱运算强度：用移位运算代替乘2或除2
2. 将一些值初始化：如一天是 86400 秒
3. 对每一次改进进行量化

## 第27章 程序规模对构建的影响

- 程序员的交流路径与程序员数量的关系
- 采用文档交流

## 第28张 管理构建

- 鼓励良好的编码实践
  - 设定标准（编码规范、文档规范、checklist 等）
  - 每个项目两个人（结对、师徒、支援）
  - Code Review
  - 提供最佳实践给人参考
  - 强调代码是共有财产
- 需求变更和设计变更
  - 不要马上变更，累积一些再变更
  - 成立变更委员会，系统化地控制变更
  - 警惕官僚主义
- 备份所有东西：源码、工具、需求、变更、设计、文档……
- 如果进度落后了怎么办：
  - 期待后期赶上——不可能
  - 增加人手——火上浇油
  - 砍需求——最靠谱
- 把程序员当人看
  - 程序员不是机器
  - 要有舒适的环境、要休息
  - 个体差异
  - 团队差异
  - 信仰问题
- 管理/教育你的管理者

## 第32章 自说明代码

- 注释的种类
  1. 复述代码——无聊
  2. 解释代码——改进代码
  3. 标记——可能用的到
  4. 概述代码——有用
  5. 代码意图说明——指出要解决的问题
  6. 传达代码无法表述的信息——非常重要

